## **Ferramentas e Preparação dos Dados para Aprendizagem de Máquina**

Na etapa de **aprendizagem de máquina** do projeto *“Análise experimental comparativa entre os índices de massa foliar obtidos por imagens de celular”*, foi utilizada uma base de dados previamente estruturada a partir do pré-processamento das imagens. Esse pré-processamento envolveu:

- **Recorte central das imagens**, visando padronizar a área de análise;
- **Cálculo de índices de massa foliar**, como GLI e outros índices espectrais.
- **Cálculo de estatísticas descritivas** dos índices de vegetação, como média, desvio padrão e percentis;

O objetivo principal foi identificar padrões entre as características extraídas das imagens de pastagens e os valores de massa foliar obtidos por análise laboratorial, a fim de avaliar o potencial do uso combinado de diferentes fontes de imagem na estimativa da qualidade das pastagens.

A base de dados utilizada nesta etapa foi derivada do pré-processamento das imagens descrito na **Etapa 3**, organizada em uma tabela estruturada com a biblioteca **Pandas**.

Essa tabela é constituída por índices espectrais calculados para cada amostra de imagem e está disponível em um arquivo tabular denominado `path_img_by_lab_sample.csv`.

Este arquivo reúne:

- Os caminhos relativos das imagens
- Seus respectivos valores de massa foliar

Esse conjunto de dados funciona como o ponto de partida para o processo de **modelagem**.

Para a etapa de **aprendizado de máquina**, foram explorados três tipos de algoritmos:

### Random Forest
Escolhido pelo seu desempenho e simplicidade frente a dados com variáveis correlacionadas de maneira não linear e por oferecer boa interpretabilidade dos resultados. O algoritmo foi treinado com os dados tabulados, incluindo as **Estatísticas descritivas dos índices de vegetação** e os respectivos **índices de massa foliar**.

O Random Forest é um algoritmo de ensemble baseado em árvores de decisão. Quando se combina várias árvores, temos uma floresta. Ele cria várias árvores de decisão usando conjuntos de dados aleatórios e, em seguida, combina as previsões de cada árvore para produzir uma previsão final. O Random Forest é um conjunto de várias árvores de decisão que trabalham juntas para fazer previsões mais precisas. Ao invés de depender de uma única árvore, ele cria múltiplas árvores e combina suas respostas. Isso o torna mais robusto e menos propenso a erros causados por variações nos dados. Ele usa a votação entre árvores para prever categorias e a média das previsões para problemas de regressão.

Como funciona?

Criação de várias árvores de decisão → O algoritmo constrói várias árvores, cada uma com um conjunto ligeiramente diferente de dados.

Cada árvore faz uma previsão → Quando recebe um novo dado, cada árvore dá um "palpite" sobre a classe correta.

Votação das árvores (Classificação) → No caso de classificação, cada árvore vota e a resposta mais escolhida entre todas é a decisão final.

Média das previsões (Regressão) → Para problemas de regressão, o resultado final é uma média das previsões feitas pelas árvores.

A imagem abaixo apresenta um trecho do código em Python utilizado na construção do modelo de regressão usado. Para avaliar o desempenho dos algoritmos, os dados foram divididos em conjuntos de treinamento e teste (relação 80/20), adotando também validação cruzada para reduzir viés na avaliação.

![Random Forest](https://ray.so/#code=IyAlJQoKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSBza2ltYWdlIGltcG9ydCBpbwppbXBvcnQgbWF0cGxvdGxpYi5weXBsb3QgYXMgcGx0CmZyb20gc2tsZWFybiBpbXBvcnQgdHJlZQpmcm9tIHNrbGVhcm4gaW1wb3J0IG1vZGVsX3NlbGVjdGlvbgpmcm9tIHNrbGVhcm4gaW1wb3J0IGVuc2VtYmxlCmZyb20gc2tsZWFybiBpbXBvcnQgcGlwZWxpbmUKZnJvbSBza2xlYXJuIGltcG9ydCBtZXRyaWNzCmZyb20gc2tsZWFybi5wcmVwcm9jZXNzaW5nIGltcG9ydCBsYWJlbF9iaW5hcml6ZQoKIyAlJQoKIyBDb25zdGFudGUgZGUgcGVxdWVubyB2YWxvciBwYXJhIGV2aXRhciBkaXZpc8OjbyBwb3IgemVybyAodGVybW8gZGUgZXN0YWJpbGlkYWRlKQplcHMgPSAxZS02CgojIEzDqiBvcyBkYWRvcyBkbyBjc3YgcXVlIGNvbnRlbSBvcyBjYW1pbmhvcyBkYXMgaW1hZ2VucyBlIHJlc3VsdGFkb3MgZGUgYmlvbWFzc2EgY29sZXRhZG9zIGVtIGNhbXBvCmRmX3BhdGhfYnlfc2FtcGxlID0gcGQucmVhZF9jc3YoJy4uL2RhdGEvcGF0aF9pbWdfYnlfbGFiX3NhbXBsZS5jc3YnKQoKIyBUcmFuc2Zvcm1hIG9zIGNhbWluaG9zIHJlbGF0aXZvcyBlbSBjb21wbGV0b3MKZGZfcGF0aF9ieV9zYW1wbGVbJ3JlbGF0aXZlX3BhdGgnXSA9IGRmX3BhdGhfYnlfc2FtcGxlWydyZWxhdGl2ZV9wYXRoJ10ubWFwKGxhbWJkYSBwYXRoOiBmJy4uL2RhdGEvaW1nX21vYmlsZS97cGF0aH0nKQoKIyBTZWxlY2lvbmEgYXBlbmFzIGFzIGNvbHVuYXMgZGUgaW50ZXJlc3NlCmRmX3BhdGhfYnlfc2FtcGxlID0gZGZfcGF0aF9ieV9zYW1wbGVbWydyZWxhdGl2ZV9wYXRoJywnbGVhZl9tYXNzJ11dCgojIFNlbGVjaW9uYSB1bWEgYW1vc3RyYSBkZSBuIGltYWdlbnMgcXVlIHBvc3N1ZW0gdW0gbWVzbW8gdmFsb3IgZGUgdGFyZ2V0IAojIGRmX3BhdGhfYnlfc2FtcGxlID0gZGZfcGF0aF9ieV9zYW1wbGUuZ3JvdXBieSgnbGVhZl9tYXNzJykuc2FtcGxlKDQpLnJlc2V0X2luZGV4KGRyb3A9VHJ1ZSkKCmRmX3BhdGhfYnlfc2FtcGxlCgojICUlCgojIEdyYWZpY28gZGEgZnJlcXVlbmNpYSBkZSBpbWFnZW5zIHBvciByZXN1bHRhZG8gZGUgbGVhZl9tYXNzCnBsdC5maWd1cmUoZHBpPTQwMCkKcGx0Lmhpc3QoZGZfcGF0aF9ieV9zYW1wbGVbJ2xlYWZfbWFzcyddLCBiaW5zPTE1LCBjb2xvcj0iYmx1ZSIsIGFscGhhPTAuNywgZWRnZWNvbG9yPSJibGFjayIpCnBsdC50aXRsZSgiRGlzdHJpYnVpw6fDo28gZGUgbiBpbWFnZW5zIHBvciByZXN1bHRhZG8gZGUgbGVhZl9tYXNzIikKcGx0LnhsYWJlbCgibGVhZl9tYXNzIikKcGx0LnlsYWJlbCgiRnJlcXXDqm5jaWEiKQpwbHQuZ3JpZChUcnVlLCBsaW5lc3R5bGU9Ii0tIiwgYWxwaGE9MC42KQpwbHQuc2hvdygpCgojIFN1bWFyaXphY2FvIGVzdGF0aXN0aWNhIGRhIGNvbHVuYSBkZSBsZWFmX21hc3MKZGZfcGF0aF9ieV9zYW1wbGUuZGVzY3JpYmUoKQoKIyAlJQoKZGVmIGN1dF9pbWcoY3JvcF9zaXplLHBhdGhfaW1nKToKICBpbWcgPSBpby5pbXJlYWQocGF0aF9pbWcpCiAgY2VudGVyX3ksIGNlbnRlcl94ID0gaW1nLnNoYXBlWzBdLy8yLCBpbWcuc2hhcGVbMV0vLzIKICBoYWxmID0gY3JvcF9zaXplLy8yCiAgcmV0dXJuIGltZ1tjZW50ZXJfeSAtIGhhbGY6Y2VudGVyX3kgKyBoYWxmLCBjZW50ZXJfeCAtIGhhbGY6Y2VudGVyX3ggKyBoYWxmXQoKCmRlZiBzdW1tYXJpemVfYnlfaW5kZXgoYXJyLCBwcmVmaXgpOgogICAgYXJyID0gYXJyLmZsYXR0ZW4oKQogICAgc3RhdHMgPSB7CiAgICAgICAgZiJ7cHJlZml4fV9tZWFuIjogbnAubWVhbihhcnIpLAogICAgICAgIGYie3ByZWZpeH1fc3RkIjogbnAuc3RkKGFyciksCiAgICB9CiAgICBzdGF0cy51cGRhdGUoe2Yie3ByZWZpeH1fcXVhbnRpbF97cX0iOiBucC5wZXJjZW50aWxlKGFyciwgcSkgZm9yIHEgaW4gcmFuZ2UoMTAsIDEwMCwgMTApfSkKICAgIHJldHVybiBzdGF0cwoKZGVmIHByb2Nlc3NpbmdfaW1nX2FuZF9jYWxjX2luZGV4cyhyb3csY3JvcF9zaXplKToKICAgICMgUHJvY2Vzc2FtZW50byBpbmljaWFsIGRhIGltYWdlbQogICAgaW1nX2Jsb2NrID0gY3V0X2ltZygKICAgICAgIGNyb3Bfc2l6ZT1jcm9wX3NpemUsCiAgICAgICBwYXRoX2ltZz1yb3dbJ3JlbGF0aXZlX3BhdGgnXQogICAgKQoKICAgICMgU2VwYXJhw6fDo28gZGFzIGJhbmRhcwogICAgUiwgRywgQiA9IFtpbWdfYmxvY2tbOiwgOiwgaV0uYXN0eXBlKG5wLmZsb2F0NjQpIGZvciBpIGluIHJhbmdlKDMpXQoKICAgICMgRGVmaW5pw6fDo28gZG9zIMOtbmRpY2VzCiAgICBpbmRleHMgPSB7CiAgICAgICAgIkdMSSI6ICgyKkcgLSBSIC0gQikgLyAoMipHICsgUiArIEIgKyBlcHMpLAogICAgICAgICJNUFJJIjogKEcgLSBSKSAvIChHICsgUiArIGVwcyksCiAgICAgICAgIkV4RyI6ICgyKkcgLSBSIC0gQikgLyAoUiArIEcgKyBCICsgZXBzKSwKICAgICAgICAiRXhSIjogKDEuNCpSIC0gRykgLyAoUiArIEcgKyBCICsgZXBzKSwKICAgICAgICAiRXhCIjogKDEuNCpCIC0gRykgLyAoUiArIEcgKyBCICsgZXBzKSwKICAgIH0KCiAgICAjIEp1bmNhbyBkb3MgcmVzdWx0YWRvcyBkZSBjYWRhIMOtbmRpY2UgY29tIG8gY2FsY3VsbyBkYXMgZXN0YXRpc3RpY2FzCiAgICBzdGF0aXN0aWNzX2J5X2luZGV4ID0ge30KICAgIGZvciBpbmRleF9uYW1lLCBpbmRleF9saXN0IGluIGluZGV4cy5pdGVtcygpOgogICAgICAgIHN0YXRpc3RpY3NfYnlfaW5kZXgudXBkYXRlKHN1bW1hcml6ZV9ieV9pbmRleChpbmRleF9saXN0LCBpbmRleF9uYW1lKSkKCiAgICByZXR1cm4gcGQuU2VyaWVzKHN0YXRpc3RpY3NfYnlfaW5kZXgpCgpkZWYgY3JlYXRlX2RmX3dpdGhfaW1nX3N0YXRpc3RpY3MoY3JvcF9zaXplKToKICAgIyBDYWxjdWxhIG9zIGluZGljZXMgR0xJLCBNUFJJLCBFeEcsIEV4UiwgRXhCCiAgIGRmX2luZGV4X3N0YXRpc3RpY3MgPSBkZl9wYXRoX2J5X3NhbXBsZS5jb3B5KCkKICAgZGZfaW5kZXhfc3RhdGlzdGljcz0gZGZfaW5kZXhfc3RhdGlzdGljcy5qb2luKAogICAgICAgZGZfaW5kZXhfc3RhdGlzdGljcy5hcHBseSgKICAgICAgICAgIHByb2Nlc3NpbmdfaW1nX2FuZF9jYWxjX2luZGV4cywKICAgICAgICAgIGFyZ3M9KGNyb3Bfc2l6ZSwpLAogICAgICAgICAgYXhpcz0xCiAgICAgICAgKQogICApCiAgIAogICAjIFNlbGVjaW9uYSBhcGVuYXMgYXMgY29sdW5hcyBkZSBpbnRlcmVzc2UKICAgZGZfaW5kZXhfc3RhdGlzdGljcyA9IGRmX2luZGV4X3N0YXRpc3RpY3NbZGZfaW5kZXhfc3RhdGlzdGljcy5jb2x1bW5zWzE6XV0KICAgcmV0dXJuIGRmX2luZGV4X3N0YXRpc3RpY3MKCmNyb3Bfc2l6ZSA9IDI0MCAKZGZfaW5kZXhfc3RhdGlzdGljcyA9IGNyZWF0ZV9kZl93aXRoX2ltZ19zdGF0aXN0aWNzKGNyb3Bfc2l6ZSkKZGZfaW5kZXhfc3RhdGlzdGljcwoKIyAlJQoKIyBSZWdyZXNzaW9uCgojIERlZmluaWNhbyBkYXMgZmVhdHVyZXMgZSB0YXJnZXQKZmVhdHVyZXMgPSBkZl9pbmRleF9zdGF0aXN0aWNzLmNvbHVtbnNbMTpdCnRhcmdldCA9ICdsZWFmX21hc3MnClgsIHkgPSBkZl9pbmRleF9zdGF0aXN0aWNzW2ZlYXR1cmVzXS5jb3B5KCksIGRmX2luZGV4X3N0YXRpc3RpY3NbdGFyZ2V0XS5jb3B5KCkKCiMgU2VwYXJhY2FvIGRvIGNvbmp1bnRvIGRlIGRhZG9zIGRlIHRyZWlubyBlIHRlc3RlClhfdHJhaW4sIFhfdGVzdCwgeV90cmFpbiwgeV90ZXN0ID0gbW9kZWxfc2VsZWN0aW9uLnRyYWluX3Rlc3Rfc3BsaXQoWCwgeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT00MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3Rfc2l6ZT0wLjIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyYXRpZnk9eQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQoKIyBBbmFsaXNlIGRhcyBtZWxob3JlcyBmZWF0dXJlcwp0cmVlX2ZlYXR1cmVzID0gdHJlZS5EZWNpc2lvblRyZWVSZWdyZXNzb3IocmFuZG9tX3N0YXRlPTQyKQp0cmVlX2ZlYXR1cmVzLmZpdChYX3RyYWluLCB5X3RyYWluKQpmZWF0dXJlX2ltcG9ydGFuY2VzID0gKHBkLlNlcmllcyh0cmVlX2ZlYXR1cmVzLmZlYXR1cmVfaW1wb3J0YW5jZXNfLGluZGV4PVhfdHJhaW4uY29sdW1ucykKICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnRfdmFsdWVzKGFzY2VuZGluZz1GYWxzZSkucmVzZXRfaW5kZXgoKSkKZmVhdHVyZV9pbXBvcnRhbmNlc1snYWN1bS4nXT1mZWF0dXJlX2ltcG9ydGFuY2VzWzBdLmN1bXN1bSgpCmJlc3RfZmVhdHVyZXMgPSAoZmVhdHVyZV9pbXBvcnRhbmNlc1tmZWF0dXJlX2ltcG9ydGFuY2VzWydhY3VtLiddIDwgMC45Nl1bJ2luZGV4J10udG9saXN0KCkpCgojIERlZmluaWNhbyBkbyBtb2RlbG8gcXVlIHNlcmEgdXRpbGl6YWRvCm1vZGVsID0gZW5zZW1ibGUuUmFuZG9tRm9yZXN0UmVncmVzc29yKAogICAgcmFuZG9tX3N0YXRlPTQyLAogICAgbl9qb2JzPTQKKQoKIyBEZWZpbmljYW8gZG9zIGhpcGVycGFyw6JtZXRyb3MgcXVlIHNlcmFtIHRlc3RhZG9zIHBhcmEgYXZhbGlhciBhIHBlcmZvcm1hY2UgZG8gbW9kZWxvCnBhcmFtcyA9IHsKICAgICJtaW5fc2FtcGxlc19sZWFmIjpbMTUsMjAsMjUsMzAsNTBdLAogICAgIm5fZXN0aW1hdG9ycyI6WzEwMCwyMDAsNTAwLDEwMDBdLAogICAgImNyaXRlcmlvbiI6WydzcXVhcmVkX2Vycm9yJywgJ2Fic29sdXRlX2Vycm9yJywgJ3BvaXNzb24nXSwKfQoKIyBDcmlhIHVtYSBidXNjYSBlbSBncmFkZSAoR3JpZCBTZWFyY2gpIHBhcmEgdGVzdGFyIGNvbWJpbmHDp8O1ZXMgZGUgaGlwZXJwYXLDom1ldHJvcyBkbyBtb2RlbG8KZ3JpZCA9IG1vZGVsX3NlbGVjdGlvbi5HcmlkU2VhcmNoQ1YobW9kZWwscGFyYW1zLGN2PTMsc2NvcmluZz0ncjInLHZlcmJvc2U9MykKCiMgQ3JpYSB1bSBwaXBlbGluZSBkZSBwcm9jZXNzYW1lbnRvIHBhcmEgbyBtb2RlbG8KbW9kZWxfcGlwZWxpbmUgPSBwaXBlbGluZS5QaXBlbGluZSgKICAgIHN0ZXBzPVsoJ0dyaWQnLGdyaWQpXQopCgojIFRyZWluYSBvIHBpcGVsaW5lIHVzYW5kbyBhcGVuYXMgYXMgbWVsaG9yZXMgZmVhdHVyZXMgc2VsZWNpb25hZGFzCm1vZGVsX3BpcGVsaW5lLmZpdChYX3RyYWluW2Jlc3RfZmVhdHVyZXNdLCB5X3RyYWluKQoKIyBQcmV2aXPDtWVzIHV0aWxpemFuZG8gbyBtZWxob3IgbW9kZWxvCnlfdHJhaW5fcHJlZCA9IG1vZGVsX3BpcGVsaW5lLnByZWRpY3QoWF90cmFpbltiZXN0X2ZlYXR1cmVzXSkKeV90ZXN0X3ByZWQgPSBtb2RlbF9waXBlbGluZS5wcmVkaWN0KFhfdGVzdFtiZXN0X2ZlYXR1cmVzXSkKCiMgTcOpdHJpY2FzIGRlIHRyZWlubyBkbyBtZWxob3IgbW9kZWxvCnIyX3RyYWluID0gbWV0cmljcy5yMl9zY29yZSh5X3RyYWluLCB5X3RyYWluX3ByZWQpCnJtc2VfdHJhaW4gPSBtZXRyaWNzLnJvb3RfbWVhbl9zcXVhcmVkX2Vycm9yKHlfdHJhaW4sIHlfdHJhaW5fcHJlZCkKbWFlX3RyYWluID0gbWV0cmljcy5tZWFuX2Fic29sdXRlX2Vycm9yKHlfdHJhaW4sIHlfdHJhaW5fcHJlZCkKCiMgTcOpdHJpY2FzIGRlIHRlc3RlIGRvIG1lbGhvciBtb2RlbG8KcjJfdGVzdCA9IG1ldHJpY3MucjJfc2NvcmUoeV90ZXN0LCB5X3Rlc3RfcHJlZCkKcm1zZV90ZXN0ID0gbWV0cmljcy5yb290X21lYW5fc3F1YXJlZF9lcnJvcih5X3Rlc3QsIHlfdGVzdF9wcmVkKQptYWVfdGVzdCA9IG1ldHJpY3MubWVhbl9hYnNvbHV0ZV9lcnJvcih5X3Rlc3QsIHlfdGVzdF9wcmVkKQoKIyBHcmFmaWNvIGNvbSBvcyByZXN1bHRhZG9zIGRhcyBtZXRyaWNhcyBkZSBwZXJmb21hY2UgZG8gbWVsaG9yIG1vZGVsbwpwbHQuZmlndXJlKGRwaT00MDApCnBsdC5zY2F0dGVyKHlfdGVzdCwgeV90ZXN0X3ByZWQsIGFscGhhPTAuNSwgY29sb3I9ImJsdWUiLCBsYWJlbD0iVGVzdGUiKQpwbHQucGxvdChbeV90ZXN0Lm1pbigpLCB5X3Rlc3QubWF4KCldLAogICAgICAgIFt5X3Rlc3QubWluKCksIHlfdGVzdC5tYXgoKV0sCiAgICAgICAgJy0tJywgY29sb3I9J3JlZCcpCnBsdC54bGFiZWwoIlZhbG9yIFJlYWwiKQpwbHQueWxhYmVsKCJWYWxvciBQcmV2aXN0byIpCnBsdC50aXRsZShmJ1JhbmRvbUZvcmVzdFJlZ3Jlc3NvciAtIFByZXZpc2FvIHggUmVhbCcpCnBsdC5ncmlkKFRydWUpCnBsdC5sZWdlbmQoKQp0ZXh0c3RyID0gJ1xuJy5qb2luKCgKICAgIGYiVHJlaW5vIC0gUsKyOiB7cjJfdHJhaW46LjNmfSB8IFJNU0U6IHtybXNlX3RyYWluOi4wZn0gfCBNQUU6IHttYWVfdHJhaW46LjBmfSIsCiAgICBmIlRlc3RlICAtIFLCsjoge3IyX3Rlc3Q6LjNmfSB8IFJNU0U6IHtybXNlX3Rlc3Q6LjBmfSB8IE1BRToge21hZV90ZXN0Oi4wZn0iCikpCnBsdC50ZXh0KDAuOTgsIDAuMDIsIHRleHRzdHIsIHRyYW5zZm9ybT1wbHQuZ2NhKCkudHJhbnNBeGVzLAogICAgICAgIGZvbnRzaXplPTgsIHZhPSJib3R0b20iLCBoYT0icmlnaHQiLAogICAgICAgIGJib3g9ZGljdChmYWNlY29sb3I9IndoaXRlIiwgYWxwaGE9MC43LCBlZGdlY29sb3I9Im5vbmUiKSkKCnBsdC5zYXZlZmlnKGYiLi4vbWV0cmljcy9yYW5kb20tZm9yZXN0L2dyYXBoaWNfcmVncmVzc2lvbl9zY2F0dGVyX3Jlc3VsdC5wbmciLCBkcGk9NDAwLCBiYm94X2luY2hlcz0idGlnaHQiKQpwbHQuc2hvdygpCnBsdC5jbG9zZSgpCgojICUlCgojIEJpbmFyeSBDbGFzc2lmaWNhdGlvbgojIHRhcmdldCA8IDMwMDAgb3IgdGFyZ2V0ID4gNDUwMCAtPiBOw6NvIGlkZWFsCiMgdGFyZ2V0IDwgNDUwMCBhbmQgdGFyZ2V0ID4gMzAwMCAtPiBJZGVhbCAKCiMgQ3JpYWNhbyBkYSBjb2x1bmEgY29tIGFzIGNsYXNzZXMgcXVlIHNlcmFtIHV0aWxpemFkYXMgcGVsbyBtb2RlbG8KZGZfaW5kZXhfc3RhdGlzdGljc19jbGFzc2lmaWNhdGlvbiA9IGRmX2luZGV4X3N0YXRpc3RpY3MuY29weSgpCmRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb25bJ3RhcmdldF9jbGFzcyddID0gZGZfaW5kZXhfc3RhdGlzdGljc19jbGFzc2lmaWNhdGlvblsnbGVhZl9tYXNzJ10uYXBwbHkoCiAgICBsYW1iZGEgbGY6IDEgaWYgKGxmID4gMzAwMCkgYW5kIChsZiA8IDQ1MDApIGVsc2UgMAopCmRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb24gPSBkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uLmRyb3AoY29sdW1ucz1bJ2xlYWZfbWFzcyddKQpkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uCgojIERlZmluaWNhbyBkYXMgZmVhdHVyZXMgZSB0YXJnZXQgCmZlYXR1cmVzID0gZGZfaW5kZXhfc3RhdGlzdGljc19jbGFzc2lmaWNhdGlvbi5jb2x1bW5zWzA6LTFdCnRhcmdldCA9ICd0YXJnZXRfY2xhc3MnClgsIHkgPSBkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uW2ZlYXR1cmVzXS5jb3B5KCksIGRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb25bdGFyZ2V0XS5jb3B5KCkKCiMgU2VwYXJhY2FvIGRvIGNvbmp1bnRvIGRlIGRhZG9zIGRlIHRyZWlubyBlIHRlc3RlClhfdHJhaW4sIFhfdGVzdCwgeV90cmFpbiwgeV90ZXN0ID0gbW9kZWxfc2VsZWN0aW9uLnRyYWluX3Rlc3Rfc3BsaXQoWCwgeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmRvbV9zdGF0ZT00MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlc3Rfc2l6ZT0wLjIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyYXRpZnk9eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKCiMgQW5hbGlzZSBkYXMgbWVsaG9yZXMgZmVhdHVyZXMKdHJlZV9mZWF0dXJlcyA9IHRyZWUuRGVjaXNpb25UcmVlQ2xhc3NpZmllcihyYW5kb21fc3RhdGU9NDIpCnRyZWVfZmVhdHVyZXMuZml0KFhfdHJhaW4sIHlfdHJhaW4pCmZlYXR1cmVfaW1wb3J0YW5jZXMgPSAocGQuU2VyaWVzKHRyZWVfZmVhdHVyZXMuZmVhdHVyZV9pbXBvcnRhbmNlc18saW5kZXg9WF90cmFpbi5jb2x1bW5zKQogICAgICAgICAgICAgICAgICAgICAgICAuc29ydF92YWx1ZXMoYXNjZW5kaW5nPUZhbHNlKS5yZXNldF9pbmRleCgpKQpmZWF0dXJlX2ltcG9ydGFuY2VzWydhY3VtLiddPWZlYXR1cmVfaW1wb3J0YW5jZXNbMF0uY3Vtc3VtKCkKYmVzdF9mZWF0dXJlcyA9IChmZWF0dXJlX2ltcG9ydGFuY2VzW2ZlYXR1cmVfaW1wb3J0YW5jZXNbJ2FjdW0uJ10gPCAwLjk2XVsnaW5kZXgnXS50b2xpc3QoKSkKCiMgRGVmaW5pY2FvIGRvIG1vZGVsbyBxdWUgc2VyYSB1dGlsaXphZG8KbW9kZWwgPSBlbnNlbWJsZS5SYW5kb21Gb3Jlc3RDbGFzc2lmaWVyKAogICAgcmFuZG9tX3N0YXRlPTQyLAogICAgbl9qb2JzPTQsCikKCiMgRGVmaW5pY2FvIGRvcyBoaXBlcnBhcsOibWV0cm9zIHF1ZSBzZXJhbSB0ZXN0YWRvcyBwYXJhIGF2YWxpYXIgYSBwZXJmb3JtYWNlIGRvIG1vZGVsbwpwYXJhbXMgPSB7CiAgICAibWluX3NhbXBsZXNfbGVhZiI6WzE1LDIwLDI1LDMwLDUwXSwKICAgICJuX2VzdGltYXRvcnMiOlsxMDAsMjAwLDUwMCwxMDAwXSwKICAgICJjcml0ZXJpb24iOlsnZ2luaScsICdlbnRyb3B5JywgJ2xvZ19sb3NzJ10sCn0KCiMgQ3JpYSB1bWEgYnVzY2EgZW0gZ3JhZGUgKEdyaWQgU2VhcmNoKSBwYXJhIHRlc3RhciBjb21iaW5hw6fDtWVzIGRlIGhpcGVycGFyw6JtZXRyb3MgZG8gbW9kZWxvCmdyaWQgPSBtb2RlbF9zZWxlY3Rpb24uR3JpZFNlYXJjaENWKG1vZGVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN2PTMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3Jpbmc9J3JvY19hdWMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJib3NlPTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKCiMgQ3JpYSB1bSBwaXBlbGluZSBkZSBwcm9jZXNzYW1lbnRvIHBhcmEgbyBtb2RlbG8KbW9kZWxfcGlwZWxpbmUgPSBwaXBlbGluZS5QaXBlbGluZSgKICAgIHN0ZXBzPVsKICAgICAgICAoJ0dyaWQnLGdyaWQpLCAKICAgIF0KKQoKIyBUcmVpbmEgbyBwaXBlbGluZSB1c2FuZG8gYXBlbmFzIGFzIG1lbGhvcmVzIGZlYXR1cmVzIHNlbGVjaW9uYWRhcwptb2RlbF9waXBlbGluZS5maXQoWF90cmFpbltiZXN0X2ZlYXR1cmVzXSwgeV90cmFpbikKCiMgUHJldmlzw7VlcyBjb20gb3MgZGFkb3MgZGUgdHJlaW5vIHV0aWxpemFuZG8gbyBtZWxob3IgbW9kZWxvCnlfdHJhaW5fcHJlZGljdCA9IG1vZGVsX3BpcGVsaW5lLnByZWRpY3QoWF90cmFpbltiZXN0X2ZlYXR1cmVzXSkKeV90cmFpbl9wcm9iYSA9IG1vZGVsX3BpcGVsaW5lLnByZWRpY3RfcHJvYmEoWF90cmFpbltiZXN0X2ZlYXR1cmVzXSlbOiwxXQoKIyBNw6l0cmljYXMgZGUgdHJlaW5vIGRvIG1lbGhvciBtb2RlbG8KYWNjX3RyYWluID0gbWV0cmljcy5hY2N1cmFjeV9zY29yZSh5X3RyYWluLCB5X3RyYWluX3ByZWRpY3QpCmF1Y190cmFpbiA9IG1ldHJpY3Mucm9jX2F1Y19zY29yZSh5X3RyYWluLCB5X3RyYWluX3Byb2JhKQpyb2NfdHJhaW4gPSBtZXRyaWNzLnJvY19jdXJ2ZSh5X3RyYWluLCB5X3RyYWluX3Byb2JhKQoKIyBQcmV2aXPDtWVzIGNvbSBvcyBkYWRvcyBkZSB0ZXN0ZSB1dGlsaXphbmRvIG8gbWVsaG9yIG1vZGVsbwp5X3Rlc3RfcHJlZGljdCA9IG1vZGVsX3BpcGVsaW5lLnByZWRpY3QoWF90ZXN0W2Jlc3RfZmVhdHVyZXNdKQp5X3Rlc3RfcHJvYmEgPSBtb2RlbF9waXBlbGluZS5wcmVkaWN0X3Byb2JhKFhfdGVzdFtiZXN0X2ZlYXR1cmVzXSlbOiwxXQoKIyBNw6l0cmljYXMgZGUgdGVzdGUgZG8gbWVsaG9yIG1vZGVsbwphY2NfdGVzdCA9IG1ldHJpY3MuYWNjdXJhY3lfc2NvcmUoeV90ZXN0LCB5X3Rlc3RfcHJlZGljdCkKYXVjX3Rlc3QgPSBtZXRyaWNzLnJvY19hdWNfc2NvcmUoeV90ZXN0LCB5X3Rlc3RfcHJvYmEpCnJvY190ZXN0ID0gbWV0cmljcy5yb2NfY3VydmUoeV90ZXN0LCB5X3Rlc3RfcHJvYmEpCgojIEdyYWZpY28gY29tIG9zIHJlc3VsdGFkb3MgZGFzIG1ldHJpY2FzIGRlIHBlcmZvbWFjZSBkbyBtZWxob3IgbW9kZWxvIGVtIGNsYXNzaWZpY2FvIGJpbmFyaWEKcGx0LmZpZ3VyZShkcGk9NDAwKQpwbHQucGxvdChyb2NfdHJhaW5bMF0sIHJvY190cmFpblsxXSkKcGx0LnBsb3Qocm9jX3Rlc3RbMF0sIHJvY190ZXN0WzFdKQpwbHQucGxvdChbMCwxXSwgWzAsMV0sICctLScsIGNvbG9yPSdibGFjaycpCnBsdC5ncmlkKFRydWUpCnBsdC55bGFiZWwoIlNlbnNpYmlsaWRhZGUiKQpwbHQueGxhYmVsKCIxIC0gRXNwZWNpZmljaWRhZGUiKQpwbHQudGl0bGUoIkN1cnZhIFJPQyIpCnRleHRzdHIgPSAnXG4nLmpvaW4oKAogICAgZiJUcmVpbm8gLSBBVUM6IHthdWNfdHJhaW46LjNmfSB8IEFjYzoge2FjY190cmFpbjouM2Z9IiwKICAgIGYiVGVzdGUgIC0gQVVDOiB7YXVjX3Rlc3Q6LjNmfSB8IEFjYzoge2FjY190ZXN0Oi4zZn0iCikpCnBsdC50ZXh0KDAuOTgsIDAuMTcsIHRleHRzdHIsIHRyYW5zZm9ybT1wbHQuZ2NhKCkudHJhbnNBeGVzLAogICAgICAgICBmb250c2l6ZT05LCB2YT0iYm90dG9tIiwgaGE9InJpZ2h0IiwKICAgICAgICAgYmJveD1kaWN0KGZhY2Vjb2xvcj0id2hpdGUiLCBhbHBoYT0wLjcsIGVkZ2Vjb2xvcj0ibm9uZSIpKQpwbHQuZ3JpZChUcnVlKQpwbHQubGVnZW5kKFsKICAgIGYiVHJlaW5vOiB7MTAwKmF1Y190cmFpbjouMmZ9IiwKICAgIGYiVGVzdGU6IHsxMDAqYXVjX3Rlc3Q6LjJmfSIKXSkKcGx0LnNhdmVmaWcoZiIuLi9tZXRyaWNzL3JhbmRvbS1mb3Jlc3QvZ3JhcGhpY19iaW5hcnlfY2xhc3NpZml0aW9uX3JvY19jdXJ2ZV9yZXN1bHQucG5nIiwgZHBpPTQwMCwgYmJveF9pbmNoZXM9InRpZ2h0IikKcGx0LnNob3coKQpwbHQuY2xvc2UoKQoKIyAlJQoKIyBNdWx0aWNsYXNzIENsYXNzaWZpY2F0aW9uCiMgdGFyZ2V0IDwgMzAwMCAtPiBBYmFpeG8gZG8gaWRlYWwKIyB0YXJnZXQgPCA0NTAwIGFuZCB0YXJnZXQgPiAzMDAwIC0-IElkZWFsIAojIHRhcmdldCA-IDQ1MDAgLT4gQWNpbWEgZG8gaWRlYWwKCiMgQ3JpYcOnw6NvIGRhIGNvbHVuYSBjb20gYXMgbXVsdGljbGFzc2VzIHF1ZSBzZXJhbSB1dGlsaXphZGFzIHBlbG8gbW9kZWxvCmRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb24gPSBkZl9pbmRleF9zdGF0aXN0aWNzLmNvcHkoKQpkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uWyd0YXJnZXRfY2xhc3MnXSA9IGRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb25bJ2xlYWZfbWFzcyddLmFwcGx5KAogICAgbGFtYmRhIGxmOiAwIGlmIGxmIDwgMzAwMCBlbHNlICgxIGlmIGxmIDw9IDQ1MDAgZWxzZSAyKQopCmRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb24gPSBkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uLmRyb3AoY29sdW1ucz1bJ2xlYWZfbWFzcyddKQpkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uWyd0YXJnZXRfY2xhc3MnXS52YWx1ZV9jb3VudHMoKQoKIyBEZWZpbmljYW8gZGFzIGZlYXR1cmVzIGUgdGFyZ2V0IApmZWF0dXJlcyA9IGRmX2luZGV4X3N0YXRpc3RpY3NfY2xhc3NpZmljYXRpb24uY29sdW1uc1swOi0xXQp0YXJnZXQgPSAndGFyZ2V0X2NsYXNzJwpYLCB5ID0gZGZfaW5kZXhfc3RhdGlzdGljc19jbGFzc2lmaWNhdGlvbltmZWF0dXJlc10uY29weSgpLCBkZl9pbmRleF9zdGF0aXN0aWNzX2NsYXNzaWZpY2F0aW9uW3RhcmdldF0uY29weSgpCgojIFNlcGFyYWNhbyBkbyBjb25qdW50byBkZSBkYWRvcyBkZSB0cmVpbm8gZSB0ZXN0ZQpYX3RyYWluLCBYX3Rlc3QsIHlfdHJhaW4sIHlfdGVzdCA9IG1vZGVsX3NlbGVjdGlvbi50cmFpbl90ZXN0X3NwbGl0KAogICAgWCwgeSwgcmFuZG9tX3N0YXRlPTQyLCB0ZXN0X3NpemU9MC4yMCwgc3RyYXRpZnk9eQopCgojIEFuYWxpc2UgZGFzIG1lbGhvcmVzIGZlYXR1cmVzCnRyZWVfZmVhdHVyZXMgPSB0cmVlLkRlY2lzaW9uVHJlZUNsYXNzaWZpZXIocmFuZG9tX3N0YXRlPTQyKQp0cmVlX2ZlYXR1cmVzLmZpdChYX3RyYWluLCB5X3RyYWluKQpmZWF0dXJlX2ltcG9ydGFuY2VzID0gKHBkLlNlcmllcyh0cmVlX2ZlYXR1cmVzLmZlYXR1cmVfaW1wb3J0YW5jZXNfLGluZGV4PVhfdHJhaW4uY29sdW1ucykKICAgICAgICAgICAgICAgICAgICAgICAgLnNvcnRfdmFsdWVzKGFzY2VuZGluZz1GYWxzZSkucmVzZXRfaW5kZXgoKSkKZmVhdHVyZV9pbXBvcnRhbmNlc1snYWN1bS4nXT1mZWF0dXJlX2ltcG9ydGFuY2VzWzBdLmN1bXN1bSgpCmJlc3RfZmVhdHVyZXMgPSAoZmVhdHVyZV9pbXBvcnRhbmNlc1tmZWF0dXJlX2ltcG9ydGFuY2VzWydhY3VtLiddIDwgMC45Nl1bJ2luZGV4J10udG9saXN0KCkpCgojIERlZmluaWNhbyBkbyBtb2RlbG8gcXVlIHNlcmEgdXRpbGl6YWRvCm1vZGVsID0gZW5zZW1ibGUuUmFuZG9tRm9yZXN0Q2xhc3NpZmllcigKICAgIHJhbmRvbV9zdGF0ZT00MiwKICAgIG5fam9icz00LAopCgojIERlZmluaWNhbyBkb3MgaGlwZXJwYXLDom1ldHJvcyBxdWUgc2VyYW0gdGVzdGFkb3MgcGFyYSBhdmFsaWFyIGEgcGVyZm9ybWFjZSBkbyBtb2RlbG8KcGFyYW1zID0gewogICAgIm1pbl9zYW1wbGVzX2xlYWYiOlsxNSwyMCwyNSwzMCw1MF0sCiAgICAibl9lc3RpbWF0b3JzIjpbMTAwLDIwMCw1MDAsMTAwMF0sCiAgICAiY3JpdGVyaW9uIjpbJ2dpbmknLCAnZW50cm9weScsICdsb2dfbG9zcyddLAp9CgojIENyaWEgdW1hIGJ1c2NhIGVtIGdyYWRlIChHcmlkIFNlYXJjaCkgcGFyYSB0ZXN0YXIgY29tYmluYcOnw7VlcyBkZSBoaXBlcnBhcsOibWV0cm9zIGRvIG1vZGVsbwpncmlkID0gbW9kZWxfc2VsZWN0aW9uLkdyaWRTZWFyY2hDVigKICAgIG1vZGVsLAogICAgcGFyYW1zLAogICAgY3Y9MywKICAgIHNjb3Jpbmc9InJvY19hdWNfb3ZyIiwgICMgcGFyYSBtdWx0aWNsYXNzZQogICAgdmVyYm9zZT00LAopCgojIENyaWEgdW0gcGlwZWxpbmUgZGUgcHJvY2Vzc2FtZW50byBwYXJhIG8gbW9kZWxvCm1vZGVsX3BpcGVsaW5lID0gcGlwZWxpbmUuUGlwZWxpbmUoCiAgICBzdGVwcz1bCiAgICAgICAgKCdHcmlkJywgZ3JpZCksIAogICAgXQopCgojIFRyZWluYSBvIHBpcGVsaW5lIHVzYW5kbyBhcGVuYXMgYXMgbWVsaG9yZXMgZmVhdHVyZXMgc2VsZWNpb25hZGFzCm1vZGVsX3BpcGVsaW5lLmZpdChYX3RyYWluW2Jlc3RfZmVhdHVyZXNdLCB5X3RyYWluKQoKIyBQcmV2aXPDtWVzIGNvbSBvcyBkYWRvcyBkZSB0cmVpbm8gdXRpbGl6YW5kbyBvIG1lbGhvciBtb2RlbG8KeV90cmFpbl9wcmVkaWN0ID0gbW9kZWxfcGlwZWxpbmUucHJlZGljdChYX3RyYWluW2Jlc3RfZmVhdHVyZXNdKQp5X3RyYWluX3Byb2JhID0gbW9kZWxfcGlwZWxpbmUucHJlZGljdF9wcm9iYShYX3RyYWluW2Jlc3RfZmVhdHVyZXNdKQoKIyBNw6l0cmljYXMgZGUgdHJlaW5vIGRvIG1lbGhvciBtb2RlbG8KYWNjX3RyYWluID0gbWV0cmljcy5hY2N1cmFjeV9zY29yZSh5X3RyYWluLCB5X3RyYWluX3ByZWRpY3QpCmYxX3RyYWluID0gbWV0cmljcy5mMV9zY29yZSh5X3RyYWluLCB5X3RyYWluX3ByZWRpY3QsIGF2ZXJhZ2U9Im1hY3JvIikKCiMgUHJldmlzw7VlcyBjb20gb3MgZGFkb3MgZGUgdGVzdGUgdXRpbGl6YW5kbyBvIG1lbGhvciBtb2RlbG8KeV90ZXN0X3ByZWRpY3QgPSBtb2RlbF9waXBlbGluZS5wcmVkaWN0KFhfdGVzdFtiZXN0X2ZlYXR1cmVzXSkKeV90ZXN0X3Byb2JhID0gbW9kZWxfcGlwZWxpbmUucHJlZGljdF9wcm9iYShYX3Rlc3RbYmVzdF9mZWF0dXJlc10pCgojIE3DqXRyaWNhcyBkZSB0ZXN0ZSBkbyBtZWxob3IgbW9kZWxvCmFjY190ZXN0ID0gbWV0cmljcy5hY2N1cmFjeV9zY29yZSh5X3Rlc3QsIHlfdGVzdF9wcmVkaWN0KQpmMV90ZXN0ID0gbWV0cmljcy5mMV9zY29yZSh5X3Rlc3QsIHlfdGVzdF9wcmVkaWN0LCBhdmVyYWdlPSJtYWNybyIpCgojIFJlYWxpemFyIHVtYSBCaW5hcml6YWNhbyBkYXMgY2xhc3NlcyAobmVjZXNzw6FyaW8gcGFyYSBST0MgbXVsdGljbGFzc2UpCmNsYXNzZXMgPSBzb3J0ZWQoeS51bmlxdWUoKSkKeV90cmFpbl9iaW4gPSBsYWJlbF9iaW5hcml6ZSh5X3RyYWluLCBjbGFzc2VzPWNsYXNzZXMpCnlfdGVzdF9iaW4gPSBsYWJlbF9iaW5hcml6ZSh5X3Rlc3QsIGNsYXNzZXM9Y2xhc3NlcykKCiMgU2VwYXJhY2FvIGRvcyBkYWRvcyBkYSBjdXJ2YSByb2MgZGUgY2FkYSBjbGFzc2UKZnByID0gZGljdCgpCnRwciA9IGRpY3QoKQpyb2NfYXVjID0gZGljdCgpCmZvciBpLCBjIGluIGVudW1lcmF0ZShjbGFzc2VzKToKICAgIGZwcltjXSwgdHByW2NdLCBfID0gbWV0cmljcy5yb2NfY3VydmUoeV90ZXN0X2Jpbls6LCBpXSwgeV90ZXN0X3Byb2JhWzosIGldKQogICAgcm9jX2F1Y1tjXSA9IG1ldHJpY3MuYXVjKGZwcltjXSwgdHByW2NdKQoKcHJpbnQoJ2ZycDonLGZwcikKcHJpbnQoJ3RwcjonLHRwcikKcHJpbnQoJ3JvY19jdXJ2ZTonLHJvY19hdWMpCgojIEdyYWZpY28gY29tIG9zIHJlc3VsdGFkb3MgZGFzIG1ldHJpY2FzIGRlIHBlcmZvbWFjZSBkbyBtZWxob3IgbW9kZWxvIGVtIGNsYXNzaWZpY2FvIG11bHRpY2xhc3NlCnBsdC5maWd1cmUoZHBpPTQwMCkKZm9yIGMgaW4gY2xhc3NlczoKICAgIHBsdC5wbG90KGZwcltjXSwgdHByW2NdLCBsYWJlbD1mIkNsYXNzZSB7Y30gKEFVQz17cm9jX2F1Y1tjXTouMmZ9KSIpCnBsdC5wbG90KFswLDFdLFswLDFdLCAnLS0nLCBjb2xvcj0nYmxhY2snKQpwbHQueGxhYmVsKCIxIC0gRXNwZWNpZmljaWRhZGUiKQpwbHQueWxhYmVsKCJTZW5zaWJpbGlkYWRlIikKcGx0LnRpdGxlKCJDdXJ2YXMgUk9DIE11bHRpY2xhc3NlIChPbmUtdnMtUmVzdCkiKQp0ZXh0c3RyID0gJ1xuJy5qb2luKCgKICAgIGYiVHJlaW5vIC0gQUNDOiB7YWNjX3RyYWluOi4zZn0gfCBGMToge2YxX3RyYWluOi4zZn0iLAogICAgZiJUZXN0ZSAgLSBBQ0M6IHthY2NfdGVzdDouM2Z9IHwgRjE6IHtmMV90ZXN0Oi4zZn0iCikpCnBsdC50ZXh0KDAuOTgsIDAuMjUsIHRleHRzdHIsIHRyYW5zZm9ybT1wbHQuZ2NhKCkudHJhbnNBeGVzLAogICAgICAgICBmb250c2l6ZT05LCB2YT0iYm90dG9tIiwgaGE9InJpZ2h0IiwKICAgICAgICAgYmJveD1kaWN0KGZhY2Vjb2xvcj0id2hpdGUiLCBhbHBoYT0wLjcsIGVkZ2Vjb2xvcj0ibm9uZSIpKQpwbHQuZ3JpZChUcnVlKQpwbHQubGVnZW5kKCkKcGx0LnNhdmVmaWcoZiIuLi9tZXRyaWNzL3JhbmRvbS1mb3Jlc3QvZ3JhcGhpY19tdWx0aWNsYXNzX2NsYXNzaWZpY2F0aW9uX3JvY19jdXJ2ZV9yZXN1bHQucG5nIiwgZHBpPTQwMCwgYmJveF9pbmNoZXM9InRpZ2h0IikKcGx0LnNob3coKQ)


### Redes Neurais
Escolhido por sua capacidade de se ajustar a padrões complexos dos dados e por sua eficiência no tempo de treinamento. O algoritmo foi treinado com os dados tabulados, incluindo as **Estatísticas descritivas dos índices de vegetação** e os respectivos **índices de massa foliar**.

### Redes Neurais Convolucionais (CNN)
Utilizadas para extrair padrões espaciais e visuais diretamente das imagens, as CNNs são especialmente eficazes na análise de dados visuais complexos. Foram aplicadas para identificar a correlação dos índices de massa foliar com as imagens multibanda criadas com cada banda sendo um dos índices de vegetação.

Essas ferramentas permitiram a construção de modelos preditivos capazes de estimar os índices de massa foliar com base nas características extraídas das imagens.

Essa combinação reforça o caráter exploratório e científico do projeto, buscando explorar qual apresenta o melhor equilíbrio entre desempenho estatístico, estabilidade e aplicabilidade prática no contexto do manejo das pastagens.

## Aprendizado de Máquina

Inicialmente, o planejamento estratégico previa a execução dos algoritmos em um ambiente cloud de alta performance, especificamente utilizando o Amazon SageMaker, com o conjunto de dados (imagens) hospedado no Amazon Simple Storage Service (S3).
A integração com o S3 para o upload de todas as imagens foi concluída com sucesso, estabelecendo-o como a fonte central de dados brutos do projeto.

![Image](https://github.com/user-attachments/assets/4ca20391-63c2-46a1-b89f-54b64bfddcf0)

No entanto, a tentativa de operacionalizar a plataforma de ML no cloud encontrou um obstáculo.
Ao prosseguir com a criação do domínio necessário para utilizar o SageMaker, a equipe se deparou com um erro de permissão.
O erro nos diz que a conta "LAB" da AWS, utilizada para o projeto, não concedia as permissões de acesso necessárias para a utilização do serviço Amazon SageMaker.

![Image](https://github.com/user-attachments/assets/2df2b0a9-d2c7-4061-a84c-41f4ef667a19)

Diante dessa restrição imposta pela política da conta, a equipe tomou a decisão de alterar o ambiente de execução. Para garantir o avanço do projeto e a entrega dos resultados de ML, o treinamento dos algoritmos (Random Forest e Deep Learning) foi feito ambiente local, sendo realizado através do Visual Studio Code. Permitindo que os processos de pré-processamento, treinamento e avaliação dos modelos fossem realizados de forma eficaz e imediata, mantendo a integridade e cronograma do projeto.

## Desafios e Estratégias de Superação

Durante o desenvolvimento desta etapa, a equipe enfrentou diversos desafios técnicos e operacionais que influenciaram a execução dos experimentos. Entre os principais, destacam-se:

### 1. Limitações do ambiente cloud
A conta educacional da AWS apresentou restrições de permissão que impossibilitaram o uso do serviço **Amazon SageMaker**, exigindo a migração para execução local.  
**Solução adotada:** uso do **Visual Studio Code** com bibliotecas Python equivalentes, garantindo continuidade ao projeto sem comprometer a integridade metodológica.

### 2. Heterogeneidade das imagens
As fotografias de pastagens foram obtidas por diferentes dispositivos e operadores, com variações em iluminação, distância, ângulo e resolução.  
**Estratégia:** recorte central padronizado das imagens, buscando isolar a região mais representativa da vegetação.

### 3. Dispersão temporal das coletas
As imagens foram capturadas em diferentes datas, sob condições ambientais variáveis.  
**Decisão:** manter a diversidade temporal para aumentar a robustez dos modelos, mesmo com o ruído introduzido.

### 4. Tamanho reduzido do banco de dados
O conjunto de imagens disponível ainda é limitado, o que afeta a capacidade preditiva dos modelos mais complexos.  
**Perspectiva:** como se trata de um projeto colaborativo e em andamento, prevê-se a expansão contínua da base de dados, permitindo reavaliações e aperfeiçoamentos progressivos dos modelos de aprendizado de máquina.

Essas ações demonstram a adoção de boas práticas de **engenharia de dados** e **experimentação**, preservando a consistência do estudo mesmo diante das limitações práticas do ambiente e das fontes de dados.

## Considerações Finais

A implementação das abordagens de **aprendizado de máquina** representou um avanço significativo no projeto, permitindo a integração entre dados visuais e laboratoriais em um fluxo analítico coerente.

Apesar das dificuldades técnicas e das limitações da base de dados, foi possível estruturar modelos capazes de gerar **estimativas iniciais da massa foliar** com base nas características espectrais das imagens.

Os resultados parciais obtidos nesta etapa serão aprofundados nas etapas seguintes, nas quais serão apresentadas:

- Métricas de desempenho
- Comparações entre os modelos
- Interpretações sobre a influência das variáveis na precisão das predições






